(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,n,t){e.exports=t(46)},45:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var a=t(4),o=t.n(a),i=t(18),r=t.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(1),l=t(2),c=t(6),u=t(5),d=t(7),h=t(0),g=function(e){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(o)))).scene=void 0,t.engine=void 0,t.canvas=void 0,t.sceneMountReturn=void 0,t.onResizeWindow=function(){t.engine&&(t.engine.resize(),t.resize())},t.onCanvasLoaded=function(e){null!==e&&(t.canvas=e,t.resize())},t.resize=function(){if(t.canvas.width=t.canvas.parentElement.offsetWidth,t.canvas.height=t.canvas.parentElement.offsetHeight,t.sceneMountReturn&&t.sceneMountReturn.resizeEvents)for(var e=0;e<t.sceneMountReturn.resizeEvents.length;e++)t.sceneMountReturn.resizeEvents[e]()},t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){this.engine=new h.Engine(this.canvas,!0,this.props.engineOptions,this.props.adaptToDeviceRatio),this.scene=new h.Scene(this.engine,this.props.sceneOptions),"function"===typeof this.props.onSceneMount?this.sceneMountReturn=this.props.onSceneMount({scene:this.scene,engine:this.engine,canvas:this.canvas}):console.error("onSceneMount function not available"),window.addEventListener("resize",this.onResizeWindow),window._active_scene=this.scene,window._active_engine=this.engine,window.addEventListener("beforeunload",this.onBeforeUnload)}},{key:"onBeforeUnload",value:function(e){window.removeEventListener("resize",this.onResizeWindow);var n=window._active_scene,t=window._active_engine;n&&n instanceof h.Scene&&n.dispose(),t&&t instanceof h.Engine&&t.dispose(),window.removeEventListener("beforeunload",this.onBeforeUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResizeWindow),this.scene.dispose(),this.engine.dispose(),window.removeEventListener("beforeunload",this.onBeforeUnload)}},{key:"render",value:function(){return a.createElement("canvas",{ref:this.onCanvasLoaded,width:"100%",height:"100%"})}}]),n}(a.Component),m=(t(26),function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"generateRandomString",value:function(e){for(var n="0123456789QWERTZUIOPLKJHGFDSAYXCVBNMqwertzuioplkjhgfdsayxcvbnm",t="",a=0;a<e;a++){t+=n[Math.floor(Math.random()*n.length)]}return t}},{key:"findFirstChild",value:function(e,n,t){var a=n.getChildTransformNodes(t),o=e.indexOf(":");if(o>0)for(var i=e.substring(0,o),r=e.substring(o+1),s=0;s<a.length;s++){var l=a[s];if(l.name===i)return this.findFirstChild(r,l,t)}else for(var c=0;c<a.length;c++){var u=a[c];if(u.name===e)return u}return null}},{key:"getBounds",value:function(e){var n={x:{min:0,max:0},y:{min:0,max:0},z:{min:0,max:0},width:0,height:0,depth:0},t=!1;if(e instanceof h.AbstractMesh){var a=e.getBoundingInfo().minimum,o=e.getBoundingInfo().maximum;n.x.min=a.x,n.y.min=a.y,n.z.min=a.z,n.x.max=o.x,n.y.max=o.y,n.z.max=o.z,t=!0}for(var i=e.getChildMeshes(),r=0;r<i.length;r++){var s=i[r];if(s.isEnabled()){var l=s.getBoundingInfo().minimum,c=s.getBoundingInfo().maximum;r<1&&!t?(n.x.min=l.x,n.y.min=l.y,n.z.min=l.z,n.x.max=c.x,n.y.max=c.y,n.z.max=c.z):(n.x.min>l.x&&(n.x.min=l.x),n.y.min>l.y&&(n.y.min=l.y),n.z.min>l.z&&(n.z.min=l.z),n.x.max<c.x&&(n.x.max=c.x),n.y.max<c.y&&(n.y.max=c.y),n.z.max<c.z&&(n.z.max=c.z))}}return n.width=Math.abs(n.x.max-n.x.min),n.height=Math.abs(n.y.max-n.y.min),n.depth=Math.abs(n.z.max-n.z.min),n}},{key:"copy",value:function(e,n,t){var a=null;e instanceof h.Mesh?(a=e.createInstance(n),a.parent=t):(a=e.clone(null,t,!0),a.name=n);for(var o=e.getChildTransformNodes(!0),i=0;i<o.length;i++){var r=o[i];this.copy(r,r.name,a)}return a}},{key:"clone",value:function(e,n,t){var a=e.clone(e.name,t||e.parent,!0);a.name=n||e.name,a.id=e.id;for(var o=e.getChildTransformNodes(!0),i=0;i<o.length;i++){var r=o[i];this.clone(r,void 0,a)}return a}},{key:"color",value:function(e,n,t){return new h.Color3(e/255,n/255,t/255)}},{key:"isPointInPoly",value:function(e,n){if(e.length<3)return!1;var t=0,a=0,o=e.length,i=!1;for(t=0,a=o-1;t<o;a=t++)e[t].y>n.y!=e[a].y>n.y&&n.x<(e[a].x-e[t].x)*(n.y-e[t].y)/(e[a].y-e[t].y)+e[t].x&&(i=!i);return i}}]),e}()),f=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"initialize",value:function(){var e=x.CURRENT_SCENE,n=new h.Texture("/texture/wood.jpg",x.CURRENT_SCENE);n.wAng=Math.PI/180*90,n.uScale=.5;var t=new h.Texture("texture/metal.jpg",x.CURRENT_SCENE);t.level=2;var a=new h.Texture("texture/laptop.png",x.CURRENT_SCENE),o=new h.Texture("texture/carpet.jpg",x.CURRENT_SCENE);o.uScale=7.5,o.vScale=7.5;var i=new h.PBRMaterial("_metal",e);i.albedoColor=m.color(155,155,160),i.metallic=.9,i.roughness=.1,i.backFaceCulling=!1,i.clearCoat.isEnabled=!0,i.clearCoat.intensity=.2,i.clearCoat.roughness=.1,i.clearCoat.indexOfRefraction=3,i.specularIntensity=.15,i.directIntensity=1,i.enableSpecularAntiAliasing=!0,i.albedoTexture=t;var r=new h.PBRMaterial("_wood",e);r.albedoColor=m.color(255,255,255),r.metallic=.2,r.roughness=.5,r.backFaceCulling=!1,r.specularIntensity=.15,r.directIntensity=1,r.enableSpecularAntiAliasing=!0,r.albedoTexture=n;var s=new h.PBRMaterial("_laptop",e);s.albedoColor=m.color(255,255,255),s.metallic=.2,s.roughness=.5,s.backFaceCulling=!1,s.specularIntensity=.15,s.directIntensity=1,s.enableSpecularAntiAliasing=!0,s.albedoTexture=a;var l=new h.PBRMaterial("_carpet",e);l.albedoColor=m.color(150,150,150),l.metallic=0,l.roughness=.9,l.backFaceCulling=!1,l.specularIntensity=.15,l.directIntensity=1,l.enableSpecularAntiAliasing=!0,l.albedoTexture=o}}]),e}(),v=(t(27),t(19)),p=t.n(v),E=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"initialize",value:function(){e.loadedNode&&!e.loadedNode.isDisposed()&&e.loadedNode.dispose(),e.loadedNode=new h.TransformNode("_loader",x.CURRENT_SCENE),e.loadedNode.setEnabled(!1),e.loading.clear(),e.loaded.clear()}},{key:"load",value:function(n,t,a){if(e.loaded.has(n)){var o=e.loaded.get(n),i={bounds:m.getBounds(o),model:m.clone(o)};t&&t(i)}else if(e.loading.has(n))e.loading.get(n).push({callback:t,error:a});else{e.loading.set(n,[]);var r=e.defaultSettings.scaling,s=e.defaultSettings.rotation,l=e.defaultSettings.pluginExtension,c=new h.TransformNode(n,x.CURRENT_SCENE);console.log("load",n),p.a.get(n,{withCredentials:!0,headers:{jwt:window.localStorage.getItem("jwt")}}).then(function(a){var o=JSON.stringify(a.data),i=new Map;h.SceneLoader.ImportMesh("","","data:"+o,x.CURRENT_SCENE,function(a,o,l,u){for(var d=0;d<a.length;d++){var g=a[d];if(d<1&&(g.parent=c,g.position=h.Vector3.Zero(),g.scaling=r,g.rotation=s),g.cullingStrategy=h.Mesh.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY,g.material){g.material.backFaceCulling=!1;for(var f=0;f<x.CURRENT_SCENE.materials.length;f++){var v=x.CURRENT_SCENE.materials[f];if(v.name==="_"+g.material.name&&v.uniqueId!==g.material.uniqueId){i.set(g.material.uniqueId,g.material),g.material=v;break}}}}i.forEach(function(e,n){e.dispose()});for(var p=c.getChildTransformNodes(),E=0;E<p.length;E++){p[E].rotation=h.Vector3.Zero()}c.parent=e.loadedNode,e.loaded.set(n,c);var w={bounds:m.getBounds(c),model:m.clone(c)};console.log("Loaded "+n,w),t&&setTimeout(function(){t(w)});for(var C=e.loading.get(n),y=function(e){var n=C[e],t={bounds:w.bounds,model:m.clone(c)};n.callback&&setTimeout(function(){n.callback(t)})},N=0;N<C.length;N++)y(N);e.loading.delete(n)},void 0,void 0,l)}).catch(function(t){console.log("Unable to load "+n,t),a&&setTimeout(function(){a()});for(var o=e.loading.get(n),i=function(e){var n=o[e];n.error&&setTimeout(function(){n.error()})},r=0;r<o.length;r++)i(r);e.loading.delete(n),c.dispose()})}}},{key:"isLoading",value:function(){return e.loading.size>0}}]),e}();E.defaultSettings={scaling:new h.Vector3(1,1,1),rotation:new h.Vector3(0,0,0),pluginExtension:".gltf"},E.loading=new Map,E.loaded=new Map,E.loadedNode=null;t(45);var w=t(20),C=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"push",value:function(n,t){e.map.has(n)?e.map.set(n,t):(e.map.set(n,t),e.queue.push(n)),e.call()}},{key:"call",value:function(){var n=e.queue.shift(),t=e.map.get(n);if(e.map.delete(n),!e.isRunning&&t){e.isRunning=!0;try{t()}catch(a){console.error(a)}setTimeout(e.call,100),e.isRunning=!1}}}]),e}();C.map=new Map,C.queue=new Array,C.isRunning=!1;var y=function(e){function n(){var e;return Object(s.a)(this,n),(e=Object(c.a)(this,Object(u.a)(n).call(this,"WorkbenchNode",x.CURRENT_SCENE))).bake(),e}return Object(d.a)(n,e),Object(l.a)(n,[{key:"bake",value:function(){var e=this;C.push(this.uniqueId,function(){for(var n=new h.Vector3(173,4,84),t=new h.Vector3(3,71,3),a=new h.Vector3(160,t.x,70),o=x.CURRENT_SCENE.getMaterialByName("_metal"),i=x.CURRENT_SCENE.getMaterialByName("_wood"),r=[],s=[],l=0;l<6;l++)s[l]=new h.Vector4(.9,0,1,1);var c={faceUV:s,size:1,wrap:!0},u=h.Mesh.CreateBox("plate",1,x.CURRENT_SCENE);u.scaling=n,u.position=new h.Vector3(u.scaling.x/2,0,-u.scaling.z/2),u.material=i,r.push(u),t.y=t.y-t.x;var d=h.MeshBuilder.CreateBox("leg0",c,x.CURRENT_SCENE);d.scaling=t,d.position=new h.Vector3(t.x/2+(n.x-a.x)/2,-t.y/2-n.y/2-t.x,-t.z/2-(n.z-a.z)/2),d.material=o,r.push(d);var g=h.MeshBuilder.CreateBox("leg1",c,x.CURRENT_SCENE);g.scaling=t,g.position=new h.Vector3(t.x/2+n.x-t.x-(n.x-a.x)/2,-t.y/2-n.y/2-t.x,-t.z/2-(n.z-a.z)/2),g.material=o,r.push(g);var m=h.MeshBuilder.CreateBox("leg2",c,x.CURRENT_SCENE);m.scaling=t,m.position=new h.Vector3(t.x/2+(n.x-a.x)/2,-t.y/2-n.y/2-t.x,-t.z/2-n.z+t.z+(n.z-a.z)/2),m.material=o,r.push(m);var f=h.MeshBuilder.CreateBox("leg3",c,x.CURRENT_SCENE);f.scaling=t,f.position=new h.Vector3(t.x/2+n.x-t.x-(n.x-a.x)/2,-t.y/2-n.y/2-t.x,-t.z/2-n.z+t.z+(n.z-a.z)/2),f.material=o,r.push(f);for(var v=0;v<6;v++)s[v]=new h.Vector4(0,.9,1,1);c.faceUV=s;var p=h.MeshBuilder.CreateBox("frameOut",c,x.CURRENT_SCENE);p.scaling=a;var E=h.MeshBuilder.CreateBox("hole",c,x.CURRENT_SCENE);E.scaling=new h.Vector3(a.x-2*a.y,a.y,a.z-2*a.y);var w=h.CSG.FromMesh(p),C=h.CSG.FromMesh(E);E.dispose(),p.dispose();var y=w.subtract(C).toMesh("frame",o,x.CURRENT_SCENE);y.position=new h.Vector3(n.x/2,-(n.y+a.y)/2,-n.z/2),r.push(y);var N=h.Mesh.MergeMeshes(r,!0,void 0,void 0,void 0,!0);N.name="table",N.parent=e;h.SceneLoader.ImportMesh("","/gltf/","seat.gltf",x.CURRENT_SCENE,function(a){var o=a[0].getChildTransformNodes()[0];o.parent=e,a[0].dispose(),o.position=new h.Vector3(n.x/2,-(n.y+t.y)-t.x,-(n.z+40)),o.rotationQuaternion=void 0,o.rotation.y=Math.PI,o.scaling=new h.Vector3(.85,.85,.85)});for(var R=new h.Vector3(37,1,25),b=x.CURRENT_SCENE.getMaterialByName("_laptop"),S=[],M={faceUV:S,size:1,wrap:!0},z=0;z<6;z++)S[z]=new h.Vector4(.5,0,.5,1);S[4]=new h.Vector4(0,.6,.5,1),M.faceUV=S;var T=h.MeshBuilder.CreateBox("lapBase",M,x.CURRENT_SCENE);S[4]=new h.Vector4(.5,0,.5,1),S[1]=new h.Vector4(.5,.6,1,1),M.faceUV=S;var _=h.MeshBuilder.CreateBox("lapScreen",M,x.CURRENT_SCENE);T.scaling=R,_.scaling=new h.Vector3(R.x,R.z,R.y),_.position=new h.Vector3(0,R.z/2-1,R.z/2-Math.sin(22.5)*(R.z/2)-1),_.rotation.x=Math.PI/180*22.5,T.material=b,_.material=b;var B=h.Mesh.MergeMeshes([T,_],!0);B.name="laptop",B.parent=e,B.position=new h.Vector3(n.x/2,n.y/2+R.y/2,-n.z/2),h.SceneLoader.ImportMesh("","/gltf/desk_lamp/","scene.gltf",x.CURRENT_SCENE,function(t){var a=t[0].getChildTransformNodes()[0].getChildTransformNodes()[0].getChildTransformNodes()[0].getChildTransformNodes()[0];a.parent=e,t[0].dispose(),a.position=new h.Vector3(n.x/4,n.y/2,-n.z/3)});h.SceneLoader.ImportMesh("","/gltf/","DamagedHelmet.gltf",x.CURRENT_SCENE,function(t){var a=t[0].getChildTransformNodes()[0];a.parent=e,t[0].dispose(),a.scaling=new h.Vector3(15,15,15),a.position=new h.Vector3(n.x-30,15,-n.z/2),a.rotationQuaternion=void 0,a.rotation=new h.Vector3(Math.PI/180*90,Math.PI/180*215,0)});var U=h.MeshBuilder.CreateGround("ground",{width:1e3,height:1e3},x.CURRENT_SCENE);return U.position.y=-n.y-a.y-t.y,U.material=x.CURRENT_SCENE.getMaterialByName("_carpet"),!0})}},{key:"dispose",value:function(){Object(w.a)(Object(u.a)(n.prototype),"dispose",this).call(this)}}]),n}(h.TransformNode),x=function(e){function n(){var e,t;Object(s.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=Object(c.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(i))))._scene=void 0,t._initialized=!1,t._babylonScene=a.createRef(),t.onSceneMount=function(e){var a={resizeEvents:new Array},o=e.canvas,i=e.scene,r=e.engine;t._scene=i,n.CURRENT_SCENE=i;i.clearColor=new h.Color4(.4,.4,.4,1),i.ambientColor=new h.Color3(.1,.1,.1),i.fogMode=h.Scene.FOGMODE_LINEAR,i.fogColor=new h.Color3(.4,.4,.4),i.fogStart=1800,i.fogEnd=2800,i.shadowsEnabled=!0;var s=new h.ArcRotateCamera("Camera",0,0,-10,new h.Vector3(86.5,0,-50),i);s.setPosition(new h.Vector3(0,150,-500)),s.lowerBetaLimit=.01,s.upperBetaLimit=Math.PI/2*1.3,s.lowerRadiusLimit=50,s.cameraRotation=new h.Vector2(Math.PI,0),s.layerMask=805306367,i.activeCamera=s;var l=new h.DirectionalLight("directional",new h.Vector3(-1,-1,1),i);l.intensity=1,l.position=new h.Vector3(1e3,200,-1400);var c=new h.DirectionalLight("directional-shadow",new h.Vector3(-1,-1.5,1),i);c.intensity=.5,c.position=new h.Vector3(1e3,200,-1400),c.lightmapMode=h.Light.LIGHTMAP_SHADOWSONLY;var u=new h.DirectionalLight("directional-back",new h.Vector3(1,-1,-1),i);u.intensity=.66,u.position=new h.Vector3(-1e3,200,1400),u.setEnabled(!0);var d=new h.ShadowGenerator(1024,c,!0);d.useBlurExponentialShadowMap=!0,d.blurScale=1,d.usePoissonSampling=!0,f.initialize(),E.initialize(),t._initialized=!0;return function n(){try{i.render()}catch(e){setTimeout(function(){n()},100)}}(),r.runRenderLoop(function(){try{i&&document.hasFocus()&&i.render()}catch(e){console.error(e)}}),new y,s.attachControl(o,!1),i.onDispose=function(){},o.addEventListener("keyup",function(e){switch(e.key){case"y":for(var n=0;n<i.meshes.length;n++){var t=i.meshes[n];t.id.endsWith("_merged")&&t.enableEdgesRendering(.333)}break;case"+":i.debugLayer.show()}}),a},t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"Scene"},a.createElement(g,{onSceneMount:this.onSceneMount,engineOptions:{preserveDrawingBuffer:!0,stencil:!0},sceneOptions:{useClonedMeshMap:!0},ref:this._babylonScene}))}}]),n}(a.Component);x.CURRENT_SCENE=void 0,r.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.8796a7f6.chunk.js.map